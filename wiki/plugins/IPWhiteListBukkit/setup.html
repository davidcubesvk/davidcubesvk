<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" type="text/css" href="../../../style/css/global.css">
  <link rel="stylesheet" type="text/css" href="../../../style/css/navigation.css">
  <link rel="stylesheet" type="text/css" href="../../../style/css/wiki/wiki.css">
  <link rel="stylesheet" type="text/css" href="../../../style/css/wiki/syntax.css">
  <link rel="stylesheet" type="text/css" href="../../../style/css/wiki/code.css">

  <script src="../../../script/footer.js"></script>
  <script src="../../../script/wiki/versionGetter.js"></script>

  <link rel="icon" href="../../../assets/graphics/local/icons/website_icon.png" type="png">
  <title>Wiki - IPWhiteListBukkit</title>
</head>

<!--Navigation-->
<header>
  <div class="navigation">
    <div class="left">
      <img src="../../../assets/graphics/local/icons/website_icon.png" class="img">
      <p>Davidcubesvk</p>
    </div>

    <ul class="right menu">
      <li class="item hoverable"><a href="../../../">Home</a></li>
      <li class="item hoverable"><a href="../../../projects">Projects</a></li>
      <li class="item current"><a>Wiki</a></li>
      <li class="item hoverable"><a href="../../../support">Support</a></li>
    </ul>
    </div>
</header>

<body>
  <div class="wiki-side-bar">
    <div class="header-box">
      <img src="../../../assets/graphics/local/icons/plugins/ip-whitelist-bukkit.png" alt="IPWhiteListBukkit's logo">
      <p>IPWhiteListBukkit v<a id="plugin-version"></a></p>
    </div>
    <!--Wiki navigation-->
    <div class="wiki-navigation">
      <div class="hoverable"><a href="../IPWhiteListBukkit">Overview</a></div>
      <div class="current"><a>Setup</a></div>
      <div class="hoverable"><a href="commands.html">Commands</a></div>
      <div class="hoverable"><a href="configuration.html">Configuration</a></div>
      <div class="hoverable"><a href="logging.html">Logging</a></div>
    </div>
  </div>

  <div class="wiki-section">
    <h1 class="title" id="step-1">1. Installation:</h1>
    <p><strong>Setup IPWhiteList before reading this.</strong> Download the latest version of the plugin available from the official plugin page on SpigotMC. Put the .jar file into the plugins folder of all your Spigot servers (which are connected to
      the BungeeCord server where IPWhiteList is installed) and restart them.
      Next steps will guide you through the configuration itself.</p>

    <!--Connneting to the extension-->
    <h1 class="title" id="step-2">2. Connecting to IPWhiteList:</h1>
    <!--Config.yml part-->
    <!--davidcubesvk's YML to HTML converter-->
    <div class="code-block">
      <div class="header">
        <p>config.yml</p>
      </div>
      <div class="code">
        <code>
          <a class="yaml-comment">#Connecting&nbsp;to&nbsp;bungeeCord:</a><br>
          <a class="yaml-key">connect:</a><br>
          &nbsp;&nbsp;<a class="yaml-comment">#Type&nbsp;of&nbsp;the&nbsp;connection&nbsp;(more&nbsp;and&nbsp;detailed&nbsp;info&nbsp;can&nbsp;be&nbsp;found&nbsp;on&nbsp;the&nbsp;wiki):</a><br>
          &nbsp;&nbsp;<a class="yaml-comment">#-&nbsp;YML:&nbsp;connection&nbsp;provided&nbsp;by&nbsp;data.yml&nbsp;file&nbsp;created&nbsp;in&nbsp;plugin's&nbsp;data&nbsp;folder</a><br>
          &nbsp;&nbsp;<a class="yaml-comment">#-&nbsp;SOCKET:&nbsp;connection&nbsp;using&nbsp;sockets</a><br>
          &nbsp;&nbsp;<a class="yaml-comment">#-&nbsp;MYSQL:&nbsp;connection&nbsp;using&nbsp;MySQL&nbsp;database</a><br>
          &nbsp;&nbsp;<a class="yaml-key">type:&nbsp;</a><a class="yaml-value">SOCKET</a><br>
          &nbsp;&nbsp;...
        </code>
      </div>
    </div>
    <p>As already pointed out on IPWhiteList's wiki, IPWhiteListBukkit and IPWhiteList need to be connected. This step is just a copy of what we made in IPWhiteList's setup.</p>
    <p><strong>type:</strong> There we need to write the type of the connection, the same as in IPWhiteList's config.yml. We have three options. See more info on <a href="../IPWhiteList/setup.html#step-2">IPWhiteList's setup page</a>.</p>

    <!--Connection configuration-->
    <h1 class="title" id="step-3">3. Connection configuration:</h1>
    <!--YML connection-->
    <h2 class="subtitle" id="step-3a">3A. YML connection:</h2>
    <!--Config.yml part-->
    <!--davidcubesvk's YML to HTML converter-->
    <div class="code-block">
      <div class="header">
        <p>config.yml</p>
      </div>
      <div class="code">
        <code>
          <a class="yaml-comment">#Connecting&nbsp;to&nbsp;bungeeCord:</a><br>
          <a class="yaml-key">connect:</a><br>
          &nbsp;&nbsp;...<br>
          &nbsp;&nbsp;<a class="yaml-comment">#Full&nbsp;path&nbsp;to&nbsp;data.yml&nbsp;file&nbsp;in&nbsp;IPWhiteList's&nbsp;folder&nbsp;(on&nbsp;BungeeCord):</a><br>
          &nbsp;&nbsp;<a
            class="yaml-comment">#NOTE!&nbsp;You&nbsp;can&nbsp;use&nbsp;../&nbsp;strings&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;path&nbsp;to&nbsp;go&nbsp;one&nbsp;folder&nbsp;up&nbsp;(begins&nbsp;at&nbsp;folder&nbsp;where&nbsp;this&nbsp;plugin's&nbsp;.jar&nbsp;file&nbsp;is).</a><br>
          &nbsp;&nbsp;<a class="yaml-comment">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;As&nbsp;directory&nbsp;and&nbsp;file&nbsp;separator&nbsp;please&nbsp;use&nbsp;\\&nbsp;(on&nbsp;Windows)&nbsp;or&nbsp;/&nbsp;(on&nbsp;Linux).</a><br>
          &nbsp;&nbsp;<a class="yaml-key">bungeePath:&nbsp;</a><a class="yaml-value">'home\BungeeCord\plugins\IPWhiteList\data.yml'</a><br>
          &nbsp;&nbsp;...
        </code>
      </div>
    </div>
    <p>If using <code>YML</code> connection type, we need to set the system path to the <code>data.yml</code> file located in the IPWhiteList's plugin folder.</p>
    <p>Please mind following:</p>
    <ul>
      <li>
        <p><strong>Path must be full system path</strong> - This means path must be <code>C:\abc\def\data.yml</code>, <code>home/abc/def/data.yml</code>, etc. (this doesn't apply if using <code>../</code> code)</p>
      </li>
      <li>
        <p><strong>Parent folder ../ code is supported</strong> - At the beggining of the path we can specify <code>../</code> code which will go to the upper (parent) folder. If used, the route begins in <code>/plugins/</code> folder.
          For example, we have IPWhiteListBukkit located in <code>home/Spigot/plugins/</code> and IPWhiteList's <code>data.yml</code> file in <code>home/BungeeCord/plugins/IPWhiteList/data.yml</code>. As already metioned, we start in
          <code>home/Spigot/plugins/</code> folder.
          If we use the first <code>../</code>, we would go from <code>home/Spigot/plugins/</code> to <code>home/Spigot/</code>. After that we use the second one, which would get us to the <code>home/</code> folder - folder
          where the BungeeCord is. So add the rest path to the data.yml file <code>BungeeCord/plugins/IPWhiteList/data.yml</code>. The final path should look like <code>../../BungeeCord/plugins/IPWhiteList/data.yml</code>.</p>
      </li>
      <li>
        <p><strong>Different OS, different file separator</strong> - If using Windows, please use <code>\\</code> file separator (example usage: <code>C:\\Desktop\\abc.yml</code>), if using Linux, Debian or Ubuntu, please use <code>/</code> (example
          usage: <code>home/abc/def.yml</code>).
          Also, <code>\</code> file separator should be working, but it's not guaranteed to work everywhere.</p>
      </li>
    </ul>

    <!--Socket connection-->
    <h2 class="subtitle" id="step-3b">3B. Socket connection:</h2>
    <!--Config.yml part-->
    <!--davidcubesvk's YML to HTML converter-->
    <div class="code-block">
      <div class="header">
        <p>config.yml</p>
      </div>
      <div class="code">
        <code>
          <a class="yaml-comment">#Connecting&nbsp;to&nbsp;bungeeCord:</a><br>
          <a class="yaml-key">connect:</a><br>
          &nbsp;&nbsp;...<br>
          &nbsp;&nbsp;<a class="yaml-comment">#Socket&nbsp;configuration:</a><br>
          &nbsp;&nbsp;<a class="yaml-key">socket:</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a
            class="yaml-comment">#IP&nbsp;of&nbsp;the&nbsp;server&nbsp;(IP&nbsp;of&nbsp;the&nbsp;machine&nbsp;where&nbsp;is&nbsp;server&nbsp;with&nbsp;IPWhiteList&nbsp;plugin&nbsp;hosted,&nbsp;or&nbsp;127.0.0.1&nbsp;if&nbsp;on&nbsp;the&nbsp;same&nbsp;machine):</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yaml-key">ip:&nbsp;</a><a class="yaml-value">127.0.0.1</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yaml-comment">#Port&nbsp;of&nbsp;the&nbsp;server&nbsp;(as&nbsp;set&nbsp;in&nbsp;IPWhiteList's&nbsp;config.yml):</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yaml-key">port:&nbsp;</a><a class="yaml-value">4444</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yaml-comment">#Automatic&nbsp;connection&nbsp;check&nbsp;delay&nbsp;(in&nbsp;ticks):</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yaml-key">connectionCheck:&nbsp;</a><a class="yaml-value">20</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yaml-comment">#Reconnect&nbsp;delay&nbsp;when&nbsp;failed&nbsp;to&nbsp;connect&nbsp;or&nbsp;connection&nbsp;failed&nbsp;(in&nbsp;seconds):</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yaml-key">reconnect:&nbsp;</a><a class="yaml-value">2</a><br>
          &nbsp;&nbsp;...
        </code>
      </div>
    </div>
    <p>If using <code>SOCKET</code> connection type, we need to configure following things:</p>

    <div class="no-margin">
      <p><strong>ip:</strong> The IP on which is is BungeeCord server hosted, or <code>127.0.0.1</code> if hosted locally (on the same machine).</p>
      <p><strong>port:</strong> The port on which is IPWhiteList's socket server hosted on, by default <code>4444</code>. Must be the same as <code>socketPort</code> in IPWhiteList; more info
        <a href="../IPWhiteList/setup.html#step-3a">here</a>.</p>
      <p><strong>connectionCheck:</strong> This specifies delay in ticks between each IPWhiteListBukkit's test message (sent to IPWhiteList) to check the connection).</p>
      <p><strong>reconnect:</strong> Delay in seconds between reconnecting attempts, when connection unexpectedly failed (or initially failed to connect) and trying to connect again. Set to <code>0</code> for instant reconnecting.</p>
    </div>

    <h2 class="subtitle" id="step-3c">3C. MySQL connection:</h2>
    <!--Config.yml part-->
    <!--davidcubesvk's YML to HTML converter-->
    <div class="code-block">
      <div class="header">
        <p>config.yml</p>
      </div>
      <div class="code">
        <code>
          <a class="yaml-comment">#Connecting&nbsp;to&nbsp;bungeeCord:</a><br>
          <a class="yaml-key">connect:</a><br>
          &nbsp;&nbsp;...<br>
          &nbsp;&nbsp;<a class="yaml-comment">#MySQL&nbsp;connection:</a><br>
          &nbsp;&nbsp;<a class="yaml-key">mysql:</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yaml-comment">#Host:</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yaml-key">host:&nbsp;</a><a class="yaml-value yaml-string-value">""</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yaml-comment">#Port:</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yaml-key">port:&nbsp;</a><a class="yaml-value yaml-string-value">""</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yaml-comment">#Username</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yaml-key">username:&nbsp;</a><a class="yaml-value yaml-string-value">""</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yaml-comment">#Password:</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yaml-key">password:&nbsp;</a><a class="yaml-value yaml-string-value">""</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yaml-comment">#Database:</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yaml-key">database:&nbsp;</a><a class="yaml-value yaml-string-value">""</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yaml-comment">#Table&nbsp;name&nbsp;to&nbsp;use&nbsp;(as&nbsp;set&nbsp;in&nbsp;IPWhiteList's&nbsp;config.yml):</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yaml-key">table:&nbsp;</a><a class="yaml-value yaml-string-value">"ipwhitelist"</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yaml-comment">#Use&nbsp;SSL&nbsp;certificate&nbsp;to&nbsp;connect&nbsp;(secure&nbsp;way&nbsp;for&nbsp;communication):</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yaml-key">useSSL:&nbsp;</a><a class="yaml-value">true</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yaml-comment">#Delay&nbsp;between&nbsp;reconnecting&nbsp;attempts,&nbsp;when&nbsp;connection&nbsp;has&nbsp;been&nbsp;unexpectedly&nbsp;closed&nbsp;(in&nbsp;seconds):</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yaml-key">reconnect:&nbsp;</a><a class="yaml-value">3</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yaml-comment">#Waiting&nbsp;timeout&nbsp;before&nbsp;reading&nbsp;from&nbsp;the&nbsp;database&nbsp;when&nbsp;player&nbsp;joins&nbsp;the&nbsp;server&nbsp;(in&nbsp;milliseconds).</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a
            class="yaml-comment">#INFO!&nbsp;If&nbsp;you&nbsp;have&nbsp;trouble&nbsp;connecting,&nbsp;this&nbsp;may&nbsp;be&nbsp;the&nbsp;solution.&nbsp;Value&nbsp;should&nbsp;be&nbsp;a&nbsp;bit&nbsp;bigger&nbsp;than&nbsp;the&nbsp;time&nbsp;MySQL</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a
            class="yaml-comment">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;insert&nbsp;operation&nbsp;(when&nbsp;the&nbsp;player&nbsp;joins&nbsp;the&nbsp;network)&nbsp;run&nbsp;by&nbsp;IPWhiteList&nbsp;takes.&nbsp;Please&nbsp;read&nbsp;the&nbsp;wiki&nbsp;for&nbsp;more</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yaml-comment">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;information.</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yaml-key">waitRead:&nbsp;</a><a class="yaml-value">0</a><br>
        </code>
      </div>
    </div>
    <p>If using <code>MYSQL</code> connection type, we need to configure all connection data and <code>waitRead</code> value:</p>
    <p><strong>Please note </strong> that <code>host</code>, <code>port</code>, <code>username</code>, <code>password</code>, <code>database</code> and <code>table</code> value must be the same as in IPWhiteList's configuration.
      Please see <a href="../IPWhiteList/setup.html#step-3b">this</a> for more info.</p>
    <div class="no-margin">
      <p><strong>host:</strong> IP of the database host.</p>
      <p><strong>port:</strong> Port on which is the database hosted (usually <code>3306</code>).</p>
      <p><strong>username:</strong> Username to connect with to the database.</p>
      <p><strong>password:</strong> Password for the username.</p>
      <p><strong>database:</strong> Name of the database to use.</p>
      <p><strong>table:</strong> Table to be used by IPWhiteList. <strong>Do not create the specified table! IPWhiteList will create it by itself with needed columns.</strong></p>
      <p><strong>useSSL:</strong> Use SSL certificate to connect.</p>
      <p><strong>reconnect:</strong> Delay in seconds between reconnecting attempts, when connection unexpectedly failed (or initially failed to connect) and trying to connect again. Set to <code>0</code> for instant reconnecting.</p>
      <p><strong>waitRead:</strong> Timeout in milliseconds to wait before reading from the database when a player is joining the server. IPWhiteList uses the fact that proxy's (IPWhiteList's) login event is called before backend server's (IPWhiteListBukkit's).
        From that next statement can be derived, IPWhiteListBukkit must read from the database after IPWhiteList's operation finishes (both operations in login events). Unfortunately, sometimes IPWhiteList's database operation finishes after IPWhiteListBukkit's,
        which will result in player's disconnection. To solve this, you can specify the time to wait before reading from the database when the login event is called,
        to make sure IPWhiteList has finished it's operation at the time when IPWhiteListBukkit processes the login event. During the waiting phase, the player is freezed in ,,Logging in..." screen. <strong>The timeout should be set to needed value,
        not unnecessarily big, since it can result in timed out connection between the server and player.</strong></p>
    </div>
    <!--Finish-->
    <h1 class="title" id="step-4">4. Restart:</h1>
    <p>If you completed all steps above and have IPWhiteList set up, restart all servers.</p>
  </div>
</body>

<!--Footer-->
<footer>
  <p>This page does not collect any personal data about you.</p>
  <p>Copyright (c) 2020 davidcubesvk, All Rights Reserved.</p>
</footer>

</html>
