<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" type="text/css" href="../../../style/global.css">
  <link rel="stylesheet" type="text/css" href="../../../style/navigation.css">
  <link rel="stylesheet" type="text/css" href="../../../style/syntax.css">
  <link rel="stylesheet" type="text/css" href="../../../style/wiki.css">
  <script src="../../../script/footer.js"></script>
  <script src="../../../script/wikiNavigation.js"></script>

  <link rel="icon" href="../../../uploads/icon.png" type="png">
  <title>Wiki - IPWhiteListBukkit</title>
</head>

<!--Navigation-->
<header>
  <nav id="navigation" class="navigation">
    <div class="menuImg">
      <img src="../../../uploads/icon.png" class="menuImg">
    </div>
    Davidcubesvk

    <ul id="menu" class="menu">
      <li class="menuItem hoverable"><a href="../../../">HOME</a></li>
      <li class="menuItem hoverable"><a href="../../../projects/">PROJECTS</a></li>
      <li class="menuItem current"><a>WIKI</a></li>
      <li class="menuItem hoverable"><a href="../../../support/">SUPPORT</a></li>
    </ul>
  </nav>
</header>

<body onload="positionFooter(); wikiNavigation();">
  <!--Wiki navigation-->
  <ul class="wikiNavigation">
    <li class="wikiNavigation title">
      <svg>
        <path d="M2 3 S6 0 10 3 M10 3 S14 0 18 3" />
        <path d="M2 3 L2 10 M10 3 L10 10 M18 3 L18 10" />
        <path d="M2 10 S6 7 10 10 M10 10 S14 7 18 10" />
      </svg>
      <a>Pages</a></li>
    <li class="wikiNavigation hoverable"><a href="../IPWhiteListBukkit/">Overview</a></li>
    <li class="wikiNavigation current"><a>Setup</a></li>
    <li class="wikiNavigation hoverable"><a href="commands.html">Commands</a></li>
    <li class="wikiNavigation hoverable"><a href="configuration.html">Configuration</a></li>
    <li class="wikiNavigation hoverable"><a href="logging.html">Logging</a></li>
  </ul>

  <!--Page navigation-->
  <ul class="wikiSideBar">
    <li class="wikiSideBar title">
      <svg>
        <path d="M0 0 L10 0 L10 2 L0 2 L0 0             M0 4 L5 4 L5 6 L0 6 L0 4      M0 8 L8 8 L8 10 L0 10 L0 8 Z">
      </svg>
      <a>Contents</a></li>
    <li class="wikiSideBar hoverable"><a href="#importantConfiguration">Installation</a></li>
    <li class="wikiSideBar hoverable"><a href="#connectingToIPWhiteList">Connecting to IPWhiteList</a></li>
    <li class="wikiSideBar hoverable"><a href="#connectionConfiguration">Connection configuration</a></li>
    <li class="wikiSideBar hoverable"><a href="#finish">Finish</a></li>
  </ul>

  <div class="wikiSection">
    <h1 class="sectionTitle" id="importantConfiguration">1. Installation:</h1>
    <p><strong>Setup IPWhiteList before reading this.</strong> Download the latest version of the plugin available from the official plugin page on SpigotMC. Put the .jar file into the plugins folder of all your Spigot servers (which are connected to
      the BungeeCord server where IPWhiteList is installed) and restart them.
      Next steps will guide you through the configuration itself.</p>

    <!--Connneting to the extension-->
    <h1 class="sectionTitle" id="connectingToIPWhiteList">2. Connecting to IPWhiteList:</h1>
    <!--Config.yml part-->
    <!--davidcubesvk's YML to HTML converter-->
    <div class="codeBlock">
      <div style="width: 1000px;">
        <code class="codeInBlock">
          <a class="yamlComment">#Connecting&nbsp;to&nbsp;bungeeCord:</a><br>
          <a class="yamlKey">connect:</a><br>
          &nbsp;&nbsp;<a class="yamlComment">#Type&nbsp;of&nbsp;the&nbsp;connection&nbsp;(more&nbsp;and&nbsp;detailed&nbsp;info&nbsp;can&nbsp;be&nbsp;found&nbsp;on&nbsp;the&nbsp;wiki):</a><br>
          &nbsp;&nbsp;<a class="yamlComment">#-&nbsp;YML:&nbsp;connection&nbsp;provided&nbsp;by&nbsp;data.yml&nbsp;file&nbsp;created&nbsp;in&nbsp;plugin's&nbsp;data&nbsp;folder</a><br>
          &nbsp;&nbsp;<a class="yamlComment">#-&nbsp;SOCKET:&nbsp;connection&nbsp;using&nbsp;sockets</a><br>
          &nbsp;&nbsp;<a class="yamlComment">#-&nbsp;MYSQL:&nbsp;connection&nbsp;using&nbsp;MySQL&nbsp;database</a><br>
          &nbsp;&nbsp;<a class="yamlKey">type:&nbsp;</a><a class="yamlValue">SOCKET</a><br>
          &nbsp;&nbsp;...
        </code>
      </div>
    </div>
    <p>We need to specify how IPWhiteListBukkit will be connected with IPWhiteList.</p>
    <p><strong>type:</strong> There we need to write the type of the connection, the same as in IPWhiteList's config.yml. We have three options. See more info on <a href="../IPWhiteList/setup.html#connectingToExtension">IPWhiteList's setup page</a>.
    </p>

    <!--Connection configuration-->
    <h1 class="sectionTitle" id="connectionConfiguration">3. Connection configuration:</h1>
    <!--YML connection-->
    <h2>3A. YML connection:</h2>
    <!--Config.yml part-->
    <!--davidcubesvk's YML to HTML converter-->
    <div class="codeBlock">
      <div style="width: 1000px;">
        <code class="codeInBlock">
          <a class="yamlComment">#Connecting&nbsp;to&nbsp;bungeeCord:</a><br>
          <a class="yamlKey">connect:</a><br>
          &nbsp;&nbsp;...
          &nbsp;&nbsp;<a class="yamlComment">#Full&nbsp;path&nbsp;to&nbsp;data.yml&nbsp;file&nbsp;in&nbsp;IPWhiteList's&nbsp;folder&nbsp;(on&nbsp;BungeeCord):</a><br>
          &nbsp;&nbsp;<a
            class="yamlComment">#NOTE!&nbsp;You&nbsp;can&nbsp;use&nbsp;../&nbsp;strings&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;path&nbsp;to&nbsp;go&nbsp;one&nbsp;folder&nbsp;up&nbsp;(begins&nbsp;at&nbsp;folder&nbsp;where&nbsp;this&nbsp;plugin's&nbsp;.jar&nbsp;file&nbsp;is).</a><br>
          &nbsp;&nbsp;<a class="yamlComment">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;As&nbsp;directory&nbsp;and&nbsp;file&nbsp;separator&nbsp;please&nbsp;use&nbsp;\\&nbsp;(on&nbsp;Windows)&nbsp;or&nbsp;/&nbsp;(on&nbsp;Linux).</a><br>
          &nbsp;&nbsp;<a class="yamlKey">bungeePath:&nbsp;</a><a class="yamlValue">'home\BungeeCord\plugins\IPWhiteList\data.yml'</a><br>
          &nbsp;&nbsp;...
        </code>
      </div>
    </div>
    <p>If we chose <code>YML</code> connection type, we must set the system path to the <code>data.yml</code> file which is located in the IPWhiteList's plugin folder.</p>
    <p>Please mind following:</p>
    <ul>
      <li>
        <p><strong>Path needs to be full system path</strong> - This means path must be <code>C:\abc\def\data.yml</code>, <code>home/abc/def/data.yml</code>, etc...</p>
      </li>
      <li>
        <p><strong>Parent folder ../ code is supported</strong> - At the beggining of the path we can specify <code>../</code> code which will go to the upper (parent) folder. If used, the path begins in the <code>/plugins/</code> server folder.
          <strong>For example</strong>, we have IPWhiteListBukkit located in <code>home/Spigot/plugins/</code> and IPWhiteList <code>data.yml</code> file in <code>home/BungeeCord/plugins/IPWhiteList/data.yml</code>. We start in
          <code>home/Spigot/plugins/</code> folder.
          We would use first <code>../</code>, we would go from <code>home/Spigot/plugins/</code> to <code>home/Spigot/</code>. After that we would use the second one, which would get us to the <code>home/</code> folder. And now we are in folder
          where the BungeeCord is. So add that part <code>BungeeCord/plugins/IPWhiteList/data.yml</code> to the path. The path should look like <code>../../BungeeCord/plugins/IPWhiteList/data.yml</code>. Here we go!</p>
      </li>
      <li>
        <p><strong>Different OS, different file separator</strong> - If using Windows, please use <code>\\</code> file separator (example usage: <code>C:\\Desktop\\abc.yml</code>), if using Linux, Debian or Ubuntu, please use <code>/</code> (example
          usage: <code>home/abc/def.yml</code>).
          Also, <code>\</code> file separator should be working, but it's not guaranteed to work everywhere.</p>
      </li>
    </ul>

    <!--Socket connection-->
    <h2>3B. Socket connection:</h2>
    <!--Config.yml part-->
    <!--davidcubesvk's YML to HTML converter-->
    <div class="codeBlock">
      <div style="width: 1000px;">
        <code class="codeInBlock">
          <a class="yamlComment">#Connecting&nbsp;to&nbsp;bungeeCord:</a><br>
          <a class="yamlKey">connect:</a><br>
          &nbsp;&nbsp;...
          &nbsp;&nbsp;<a class="yamlComment">#Socket&nbsp;configuration:</a><br>
          &nbsp;&nbsp;<a class="yamlKey">socket:</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a
            class="yamlComment">#IP&nbsp;of&nbsp;the&nbsp;server&nbsp;(IP&nbsp;of&nbsp;the&nbsp;machine&nbsp;where&nbsp;is&nbsp;server&nbsp;with&nbsp;IPWhiteList&nbsp;plugin&nbsp;hosted,&nbsp;or&nbsp;127.0.0.1&nbsp;if&nbsp;on&nbsp;the&nbsp;same&nbsp;machine):</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yamlKey">ip:&nbsp;</a><a class="yamlValue">127.0.0.1</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yamlComment">#Port&nbsp;of&nbsp;the&nbsp;server&nbsp;(as&nbsp;set&nbsp;in&nbsp;IPWhiteList's&nbsp;config.yml):</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yamlKey">port:&nbsp;</a><a class="yamlValue">4444</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yamlComment">#Automatic&nbsp;connection&nbsp;check&nbsp;delay&nbsp;(in&nbsp;ticks):</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yamlKey">connectionCheck:&nbsp;</a><a class="yamlValue">20</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yamlComment">#Reconnect&nbsp;delay&nbsp;when&nbsp;failed&nbsp;to&nbsp;connect&nbsp;or&nbsp;connection&nbsp;failed&nbsp;(in&nbsp;seconds):</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yamlKey">reconnect:&nbsp;</a><a class="yamlValue">2</a><br>
          &nbsp;&nbsp;...
        </code>
      </div>
    </div>
    <p>If we chose <code>SOCKET<sup><a href="#term1">1</a></sup></code> connection type, we need to configure a few things about the connection.</p>
    <p><strong>ip:</strong> The IP on which is is BungeeCord server hosted on, or <code>127.0.0.1</code> if hosted on the same machine.</p>
    <p><strong>port:</strong> The port on which is IPWhiteList's socket server hosted on, by default <code>4444</code>. Must be the same as <code>socketPort</code> in <code>config.yml</code> of IPWhiteList; learn more <a
        href="../IPWhiteList/setup.html#connectingToExtension">here</a>.</p>
    <p><strong>connectionCheck:</strong> This specifies the delay in ticks between IPWhiteListBukkit sends a test message to IPWhiteList to check connection.</p>
    <p><strong>reconnect:</strong> Delay in seconds between reconnecting attempts when connection unexpectedly closed or failed to connect and trying again.</p>

    <h2>3C. MySQL connection:</h2>
    <!--Config.yml part-->
    <!--davidcubesvk's YML to HTML converter-->
    <div class="codeBlock">
      <div style="width: 1000px;">
        <code class="codeInBlock">
          <a class="yamlComment">#Connecting&nbsp;to&nbsp;bungeeCord:</a><br>
          <a class="yamlKey">connect:</a><br>
          &nbsp;&nbsp;...
          &nbsp;&nbsp;<a class="yamlComment">#MySQL&nbsp;connection:</a><br>
          &nbsp;&nbsp;<a class="yamlKey">mysql:</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yamlComment">#Host:</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yamlKey">host:&nbsp;</a><a class="yamlValue yamlStringValue">""</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yamlComment">#Port:</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yamlKey">port:&nbsp;</a><a class="yamlValue yamlStringValue">""</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yamlComment">#Username</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yamlKey">username:&nbsp;</a><a class="yamlValue yamlStringValue">""</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yamlComment">#Password:</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yamlKey">password:&nbsp;</a><a class="yamlValue yamlStringValue">""</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yamlComment">#Database:</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yamlKey">database:&nbsp;</a><a class="yamlValue yamlStringValue">""</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yamlComment">#Table&nbsp;name&nbsp;to&nbsp;use&nbsp;(as&nbsp;set&nbsp;in&nbsp;IPWhiteList's&nbsp;config.yml):</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yamlKey">table:&nbsp;</a><a class="yamlValue yamlStringValue">"ipwhitelist"</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yamlComment">#Use&nbsp;SSL&nbsp;certificate&nbsp;to&nbsp;connect&nbsp;(secure&nbsp;way&nbsp;for&nbsp;communication):</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yamlKey">useSSL:&nbsp;</a><a class="yamlValue">true</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yamlComment">#Delay&nbsp;between&nbsp;reconnecting&nbsp;attempts,&nbsp;when&nbsp;connection&nbsp;has&nbsp;been&nbsp;unexpectedly&nbsp;closed&nbsp;(in&nbsp;seconds):</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yamlKey">reconnect:&nbsp;</a><a class="yamlValue">3</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yamlComment">#Waiting&nbsp;timeout&nbsp;before&nbsp;reading&nbsp;from&nbsp;the&nbsp;database&nbsp;when&nbsp;player&nbsp;joins&nbsp;the&nbsp;server&nbsp;(in&nbsp;milliseconds).</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a
            class="yamlComment">#INFO!&nbsp;If&nbsp;you&nbsp;have&nbsp;trouble&nbsp;connecting,&nbsp;this&nbsp;may&nbsp;be&nbsp;the&nbsp;solution.&nbsp;Value&nbsp;should&nbsp;be&nbsp;a&nbsp;bit&nbsp;bigger&nbsp;than&nbsp;the&nbsp;time&nbsp;MySQL</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a
            class="yamlComment">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;insert&nbsp;operation&nbsp;(when&nbsp;the&nbsp;player&nbsp;joins&nbsp;the&nbsp;network)&nbsp;run&nbsp;by&nbsp;IPWhiteList&nbsp;takes.&nbsp;Please&nbsp;read&nbsp;the&nbsp;wiki&nbsp;for&nbsp;more</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yamlComment">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;information.</a><br>
          &nbsp;&nbsp;&nbsp;&nbsp;<a class="yamlKey">waitRead:&nbsp;</a><a class="yamlValue">0</a><br>
        </code>
      </div>
    </div>
    <p>If we chose <code>MYSQL</code> connection type, we need to configure all connection data and also what table we want IPWhiteList and IPWhiteListBukkit to use and the reconnect delay.</p>
    <p><strong>host:</strong> IP of the database host. <strong>Must be the same as in IPWhiteList's config.yml.</strong></p>
    <p><strong>port:</strong> Port on which is the database hosted. <strong>Must be the same as in IPWhiteList's config.yml.</strong></p>
    <p><strong>username:</strong> Username to connect with to the database. <strong>Must be the same as in IPWhiteList's config.yml.</strong></p>
    <p><strong>password:</strong> Password for the username. <strong>Must be the same as in IPWhiteList's config.yml.</strong></p>
    <p><strong>database:</strong> Name of the database to use. <strong>Must be the same as in IPWhiteList's config.yml.</strong></p>
    <p><strong>table:</strong> Table to be used by IPWhiteList. <strong>Must be the same as in IPWhiteList's config.yml.</strong></p>
    <p><strong>useSSL:</strong> Use SSL certificate to connect.</p>
    <p><strong>reconnect:</strong> Delay in seconds between reconnecting attempts, when connection unexpectedly failed or failed to connect and trying again.</p>
    <p><strong>waitRead:</strong> Timeout in milliseconds to wait before reading from the database when a player is joining the server. This connection uses the fact that IPWhiteList's login event is called before IPWhiteListBukkit's,
    in this case IPWhiteList runs an operation in the database and IPWhiteListBukkit depends on it. That means, that operation needs to be finished before the IPWhiteListBukkit processes player's login event. Unfortunately, in some cases
    the IPWhiteList's database operation finished after IPWhiteListBukkit processed the login event, so the player couldn't join. To solve this, you can specify the time to wait before reading from the database when the login event is called, 
    so the IPWhiteList's operation has finished already before at the processing time. During this, the player is freezed in ,,Logging in..." screen.</p>

    <!--Finish-->
    <h1 class="sectionTitle" id="finish">4. Finish:</h1>
    <p>If you completed all steps above and have IPWhiteList set up, restart all servers.</p>

    <div class="termDesc">
      <p id="term1"><sup>1</sup><strong>socket</strong> - type of communication over the internet which consists of one server
        and clients (server is IPWhiteList and clients IPWhiteListBukkit plugins in this case). Server is hosted on some port and clients connect to this server so they can share information between each other. Pretty the same like you
        join any game server as a client.</p>
    </div>
  </div>
</body>

<!--Footer-->
<footer style="margin-top: 0;">
  <p class="footerPersonalData">This page does not collect any personal data about you.</p>
  <p>Copyright (c) 2020 davidcubesvk, All Rights Reserved.</p>
</footer>

</html>
