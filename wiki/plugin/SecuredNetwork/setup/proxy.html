<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" type="text/css" href="../../../../style/css/global.css">
  <link rel="stylesheet" type="text/css" href="../../../../style/css/navigation.css">
  <link rel="stylesheet" type="text/css" href="../../../../style/css/wiki/wiki.css">
  <link rel="stylesheet" type="text/css" href="../../../../style/css/wiki/code.css">

  <script src="../../../../script/footer.js"></script>
  <script src="../../../../script/wiki/version_get.js"></script>
  <script src="../../../../script/wiki/spoiler.js"></script>

  <link rel="icon" href="../../../../assets/graphics/local/icon.png" type="png">
  <title>Wiki - SecuredNetwork</title>
</head>

<!--Navigation-->
<header>
  <div class="navigation">
    <div class="left">
      <img src="../../../../assets/graphics/local/icon.png" class="img">
      <p>Davidcubesvk</p>
    </div>

    <ul class="right menu">
      <li class="item hoverable"><a href="../../../../">Home</a></li>
      <li class="item hoverable"><a href="../../../../projects">Projects</a></li>
      <li class="item current"><a>Wiki</a></li>
      <li class="item hoverable"><a href="../../../../support">Support</a></li>
    </ul>
  </div>
</header>

<body>
  <div class="wiki-side-bar">
    <div class="header-box">
      <img src="../../../../assets/graphics/public/plugin/SecuredNetwork/icon.png" alt="SecuredNetwork's logo">
      <p>SecuredNetwork v<a id="plugin-version"></a></p>
    </div>
    <!--Wiki navigation-->
    <div class="wiki-navigation">
      <div class="hoverable"><a href="../">Overview</a></div>
      <div class="hoverable expandable expandable-navigation-item open current">
        <div class="header">
          <p class="title">Setup</p>
        </div>
        <div class="content">
          <div class="item currentItem"><a>Proxy server</a></div>
          <div class="item"><a href="backend.html">Backend server</a></div>
        </div>
      </div>
      <div class="hoverable"><a href="../commands_permissions.html">Commands and permissions</a></div>
      <div class="hoverable expandable expandable-navigation-item">
        <div class="header">
          <p class="title">Configuration</p>
        </div>
        <div class="content">
          <div class="item"><a href="../configuration/proxy.html">Proxy server</a></div>
          <div class="item"><a href="../configuration/backend.html">Backend server</a></div>
        </div>
      </div>
      <div class="hoverable"><a href="../logging.html">Logging</a></div>
      <div class="hoverable"><a href="../api.html">API</a></div>
    </div>
  </div>

  <div class="wiki-section">
    <!--Installation-->
    <h1 class="title" id="step-1">1. Installation:</h1>
    <p>Download the latest version of the plugin available from the official plugin page on SpigotMC. Put the .jar file into the plugins folder of your BungeeCord server and restart it.
      Next steps will guide you through the configuration itself. Keep the .jar file, it will be used on other servers.</p>

    <!--Connecting to a plugin instance on a backend server-->
    <h1 class="title" id="step-2">2. Connecting to SecuredNetwork on a backend server:</h1>
    <!--Reference-->
    <p><i>This step refers to configuration at <code>connection.type</code> in <code>config.yml</code> file.</i></p>
    <!--Text-->
    <p>SecuredNetwork plugin on proxy needs to communicate with instances on your backend servers. Let's specify how.</p>
    <p><strong>type:</strong> This specifies the connection type that will be used for the communication.</p>
    <ul>
      <li>
        <p><code>FILE</code> - Plugins communicate using <code>data.yml</code> file created in SecuredNetwork's plugin folder on the proxy server.
          Skip step 3 as there is no configuration for this connection type on proxy's side.</p>
      </li>
      <li>
        <p><code>SOCKET</code> - Something like a messaging service between two people. Plugins communicate ,,directly" by sending messages to each other whenever needed. This connection consists of a server and clients. The server is the
          SecuredNetwork on proxy
          and clients are plugins on your backend servers. Imagine you are opening a website, the website is a server and your browser is a client. This is also the same when you connect any game server - you are the client.</p>
      </li>
      <li>
        <p><code>DATABASE</code> - Recommended. Plugins communicate using a database.</p>
      </li>
    </ul>
    <!--Comparision-->
    <h2 class="subtitle" id="step-2-comparision">Comparision:</h2>
    <p>Here are hosting types supported by each connection type, their pros and cons:</p>
    <table class="wiki-table">
      <tr>
        <th>Connection type</th>
        <th>Supports</th>
        <th>Pros (+)</th>
        <th>Cons (-)</th>
      </tr>
      <tr>
        <td><code>FILE</code></td>
        <td>All servers except shared hosting.</td>
        <td>Reliable.</td>
        <td>Slow.</td>
      </tr>
      <tr>
        <td><code>SOCKET</code></td>
        <td>All servers (hosting types).</td>
        <td>Fast.</td>
        <td>Unsecure (does not use SSL), hard to set up.</td>
      </tr>
      <tr>
        <td><code>DATABASE</code></td>
        <td>All servers (hosting types).</td>
        <td>Fast, reliable, can use SSL, easy and familiar to set up, database is standard for many servers.</td>
        <td>-</td>
      </tr>
    </table>
    <!--Communication scheme-->
    <h2 class="subtitle" id="communication-scheme">Universal communication (connection) scheme:</h2>
    <img src="../../../../assets/graphics/local/wiki/plugin/SecuredNetwork/communication-scheme.png" alt="Communication scheme" class="wiki-image"></img>

    <!--Connection configuration-->
    <h1 class="title" id="step-3">3. Connection configuration:</h1>
    <!--Socket-->
    <h2 class="subtitle" id="step-3a">3A. Socket:</h2>
    <!--Reference-->
    <p><i>This step refers to configuration at <code>connection.socket-port</code> in <code>config.yml</code> file.</i></p>
    <!--Text-->
    <p>If we chose <code>SOCKET</code> connection type, we need to configure only one thing:</p>
    <p><strong>socket-port:</strong> Port on which SecuredNetwork should host it's server socket. This is not the port of your server. Please keep in mind you must open this port on your machine
      (if you are not using local connection - e.g. you do not have all servers on one machine).</p>
    <!--Database-->
    <h2 class="subtitle" id="step-3b">3B. Database:</h2>
    <!--Reference-->
    <p><i>This step refers to configuration section at <code>connection.database</code> in <code>config.yml</code> file.</i></p>
    <!--Text-->
    <p>If we chose <code>DATABASE</code> connection type, we need to configure everything needed for a database connection.</p>
    <div class="no-margin">
      <p><strong>host:</strong> IP of the database host.</p>
      <p><strong>port:</strong> Port on which is the database hosted (usually <code>3306</code>).</p>
      <p><strong>username:</strong> Username to connect with to the database.</p>
      <p><strong>password:</strong> Password for the username.</p>
      <p><strong>database:</strong> Name of the database to use.</p>
      <p><strong>table:</strong> Table to be used by SecuredNetwork. Do not create the specified table! The plugin will create it by itself with needed columns.</p>
      <p><strong>ssl-mode:</strong> Indicates which connections should the driver (plugin) create to the server (more options are shown <a
          href="https://dev.database.com/doc/connector-j/8.0/en/connector-j-reference-configuration-properties.html#sslMode" target="_blank">here</a>):</p>
      <ul>
        <li><code>DISABLED</code> - establish unencrypted connections,</li>
        <li><code>PREFERRED</code> - establish encrypted connections if the server enabled them, otherwise use unencrypted connections,</li>
        <li><code>DISABLED</code> - establish encrypted connections, if not enabled by the server, do not connect.</li>
      </ul>
      <p><strong>timeout:</strong> Timeout configuration:</p>
      <ul>
        <li><strong>connect:</strong> Time in milliseconds for the plugin to establish a connection to the database, until the request times out.</li>
        <li><strong>socket:</strong> Time in milliseconds for any operation to finish, until it becomes timed out.</li>
        <li><strong>reconnect:</strong> Delay in seconds between reconnecting attempts, when connection unexpectedly failed (or initially failed to connect) and trying to connect again. Set to <code>0</code> for instant reconnecting.</li>
      </ul>
      <p><strong>statement-pool-size:</strong> Statement pool sizes. Statements send requests to the database and process what comes in the return. The sending process of such a statement
        includes compiling of it's request (and other things), which takes some time. Once the request is compiled, it can be sent immediately.
        The advantage of this is that statements can be reused, so there's a statement pool. This ,,pool" contains these compiled
        statements. A statement is taken from the pool when a operation needs to be executed, operation finishes and then it's
        returned to be reused. That's because one statement can't be used by more than 1 caller at the same time.
        Each time player joins (or quits) the server, one statement operation is needed. You should adjust the values below
        approximately how many player's join (or quit) your server through this proxy at the same time and how long one operation
        takes. If no statement is available in the pool (all of them are in use), this is not a problem, just the statement needs
        to be compiled, which will make a latency of some milliseconds. <strong>Each statement in the pool takes memory as it is compiled.
          Please adjust the value by the recommendations given above, but also think about how much RAM do you have. If your server takes too much RAM after setting the pool size to a higher value, reduce the pool size.</strong></p>
      <ul>
        <li><strong>write:</strong> Pool size for writing operations (when a player connects to the server).</li>
        <li><strong>delete:</strong> Pool size for deleting operations (when a player disconnects from the server).</li>
      </ul>
    </div>

    <!--IP whitelisting-->
    <h1 class="title" id="step-4">4. IP whitelisting (optional):</h1>
    <!--Reference-->
    <p><i>This step refers to configuration section at <code>ip-whitelist</code> in <code>config.yml</code> file.</i></p>
    <!--Text-->
    <p>If you want to use the original main feature of this plugin, you can. Each player connecting with any of these IPs will be allowed to connect, others will get disconnected during the logging in process.
      You can whitelist number-IPs, domains, hostnames and ports. At first, set <code>enabled:</code> to <code>true</code> to enable IP-whitelisting feature. Then, whitelist IPs by adding them to <code>ips</code> list following these rules:</p>
    <ul>
      <li>
        <p><strong>Whitelisting ports</strong> - Easily, just specify the IP and the wanted port separated with a colon, for example <code>yourserver.com:25565</code> will allow players connecting only with this IP and port.
          If not specified, IPWhiteList will obtain and use the port on which is the BungeeCord server hosted. For example, you have the proxy server hosted on port <code>25565</code> and you have whitelisted <code>yourserver.com</code>, player connecting with the port <code>25565</code>
          and this IP will be allowed (with <code>yourserver.com:25565</code>).</p>
      </li>
      <li>
        <p><strong>Whitelisting hostnames</strong> - Hostnames can be whitelisted easily by adding them in front of the IP, for example <code>mc.yourserver.com</code> will allow players connecting with <code>mc.yourserver.com</code>
          (see the upper point if you'd like to know how ports work). If you want to allow all hostnames, use <code>*.</code> wildcard as hostname before the IP; this means <code>*.yourserver.com</code> will allow
          players connecting with <code>abc.yourserver.com</code>, <code>xyz.yourserver.com</code> etc., but it will not allow players connecting with <code>yourserver.com</code> (without any hostname).</p>
      </li>
      <li>
        <p><strong>For servers with dynamic IP address</strong> - If the machine on which is your proxy server hosted has dynamic IP (it's IP changes every server restart), just use placeholder <code>{ip}</code> as a replacement for the machine's IP.
          As it is just a replacement, you can specify ports, hostnames, without any problems.</p>
      </li>
      <li>
        <p><strong>IP comparing prefixes</strong> - IPs (the one used by player and a whitelisted IP) are compared case-sensitively by default. To change the coparision mode, insert <code>[CASE_SENSITIVE]</code> or <code>[CASE_INSENSITIVE]</code> prefix before the IP. For example,
        <code>[CASE_INSENSITIVE]abc.yourserver.com</code> will also allow players connecting with <code>aBc.yoUrSerVer.com</code>.</p>
      </li>
    </ul>

    <!--SecuredNetwork on backend servers-->
    <h1 class="title" id="step-5">5. SecuredNetwork on your backend servers:</h1>
    <p>Now you can continue configuring SecuredNetwork on all your backend servers <a href="backend.html">here</a>.</p>
  </div>
</body>

<!--Footer-->
<footer>
  <p>This page does not collect any personal data about you.</p>
  <p>Copyright (c) 2020 davidcubesvk, All Rights Reserved.</p>
</footer>

</html>
